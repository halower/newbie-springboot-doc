# 支持软删除

## 如何使用
`NewBie`已经默认实现了两个软删除基础接口，业务类只需要简单实现`ISoftDelete`接口,同时业务仓库接口只需要继承`SoftDeleteCrudRepository` or `SoftDeletePagingAndSortingRepository`接口 这样就可以自动支持软删除了
其中`ISoftDelete`定义如下
```
public interface ISoftDelete<ID> {
    boolean getIsDeleted();
    void setIsDeleted(boolean deleted);
    ID getId();
}
```
> 软删除标识属性为`isDeleted` ,同时需要实现一个`getId` 告诉 `NewBie` 该对象的主键对象

*例如*下面的例子中我们实现了[自动审计](自动审计.md)的同时支持了软删除就需要加个标记
```
@Data
@Entity
public class User extends FullAudited<Integer> implements ISoftDelete<Integer> {
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Integer id;
    private int age;
    private String name;
    private Boolean isDeleted = false;
}
```
同时，`UserRepository`接口继承`SoftDeleteCrudRepository`接口

``` 
public interface UserRepository extends SoftDeleteCrudRepository<User,Integer> {
}
``` 

> 到此我们调用`delete`的时候即是软删除

## 软删除仓储接口
?> `NewBie` 提供了两个软删除接口    
`SoftDeleteCrudRepository`   简单仓储     
`SoftDeletePagingAndSortingRepository` 分页仓储 

业务仓储继承这两个接口后，查询,求和等接口会自动排除已经软删除的对象,同时所有的删除功能均非物理删除，除此以外我们还提供了获取已经删除对象集合的接口
```
 List<T> findIsDeleted();
 List<T> findIsDeleted(Page page);
 List<T> findIsDeleted(Sort sort);
```
